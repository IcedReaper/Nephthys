/* Angular-ChartJS 2.0 https://github.com/jtblin/angular-chart.js/tree/chartjs-2.0 - adaption for fixedBarHeight by IcedReaper - needs to be added as a pull-request or a fork */
!function(t){"use strict";if("object"==typeof exports)module.exports=t("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js"));else if("function"==typeof define&&define.amd)define(["angular","chart"],t);else{if("undefined"==typeof angular||"undefined"==typeof Chart)throw new Error("Chart.js library needs to included, see http://jtblin.github.io/angular-chart.js/");t(angular,Chart)}}(function(t,r){"use strict";function a(){var a={},e={Chart:r,getOptions:function(r){var e=r&&a[r]||{};return t.extend({},a,e)}};this.setOptions=function(r,e){return e?void(a[r]=t.extend(a[r]||{},e)):(e=r,void(a=t.extend(a,e)))},this.$get=function(){return e}}function e(a,e){function o(t,r){return t&&r&&t.length&&r.length?Array.isArray(t[0])?t.length===r.length&&t.every(function(t,a){return t.length===r[a].length}):r.reduce(i,0)>0?t.length===r.length:!1:!1}function i(t,r){return t+r}function c(r,a,e,n){var o=null;return function(i){var c=a.getElementsAtEvent||a.getPointsAtEvent;if(c){var h=c.call(a,i);(n===!1||t.equals(o,h)===!1)&&(o=h,r[e](h,i))}}}function h(e,n){for(var o=t.copy(n.chartColors||a.getOptions(e).chartColors||r.defaults.global.colors),i=o.length<n.chartData.length;o.length<n.chartData.length;)o.push(n.chartGetColor());return i&&(n.chartColors=o),o.map(u)}function u(t){return"object"==typeof t&&null!==t?t:"string"==typeof t&&"#"===t[0]?s(g(t.substr(1))):l()}function l(){var t=[f(0,255),f(0,255),f(0,255)];return s(t)}function s(t){return{backgroundColor:d(t,.2),borderColor:d(t,1),pointBackgroundColor:d(t,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:d(t,.8)}}function f(t,r){return Math.floor(Math.random()*(r-t+1))+t}function d(t,r){return n?"rgb("+t.join(",")+")":"rgba("+t.concat(r).join(",")+")"}function g(t){var r=parseInt(t,16),a=r>>16&255,e=r>>8&255,n=255&r;return[a,e,n]}function p(r,a,e,n,o){return{labels:r,datasets:a.map(function(r,a){var i=t.extend({},n[a],{label:e[a],data:r});return o&&(i.yAxisID=o[a]),i})}}function C(t,r,a){return{labels:t,datasets:[{data:r,backgroundColor:a.map(function(t){return t.pointBackgroundColor}),hoverBackgroundColor:a.map(function(t){return t.backgroundColor})}]}}function v(t,r,a){Array.isArray(a.chartData[0])?t.data.datasets.forEach(function(t,a){t.data=r[a]}):t.data.datasets[0].data=r,t.update(),a.$emit("chart-update",t)}function y(t){return!t||Array.isArray(t)&&!t.length||"object"==typeof t&&!Object.keys(t).length}function b(e,n){var o=t.extend({},r.defaults.global,a.getOptions(e),n.chartOptions);return o.responsive}function m(t,r){t&&(t.destroy(),r.$emit("chart-destroy",t))}return function(r){return{restrict:"CA",scope:{chartGetColor:"=?",chartType:"=",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColors:"=?",chartClick:"=?",chartHover:"=?",chartYAxes:"=?"},link:function(i,u){function s(a,e){if(!y(a)&&!t.equals(a,e)){var n=r||i.chartType;n&&f(n)}}function f(r){if(b(r,i)&&0===u[0].clientHeight)return e(function(){f(r)},50,!1);if(i.chartData&&i.chartData.length){i.chartGetColor="function"==typeof i.chartGetColor?i.chartGetColor:l;var n=h(r,i),o=u[0],s=o.getContext("2d"),g=Array.isArray(i.chartData[0])?p(i.chartLabels,i.chartData,i.chartSeries||[],n,i.chartYAxes):C(i.chartLabels,i.chartData,n),v=t.extend({},a.getOptions(r),i.chartOptions);if(m(d,i),i.chartOptions.fixedBarHeight&&i.chartOptions.barHeight&&i.chartData&&i.chartData.length>0){var y=i.chartOptions.barHeight*i.chartData[0].length;s.canvas.height=y+35}i.chartOptions.fixedHeight&&i.chartOptions.height&&(s.canvas.height=i.chartOptions.height),d=new a.Chart(s,{type:r,data:g,options:v}),i.$emit("chart-create",d),o.onclick=i.chartClick?c(i,d,"chartClick",!1):t.noop,o.onmousemove=i.chartHover?c(i,d,"chartHover",!0):t.noop}}var d;n&&window.G_vmlCanvasManager.initElement(u[0]),i.$watch("chartData",function(t,a){if(!t||!t.length||Array.isArray(t[0])&&!t[0].length)return void m(d,i);var e=r||i.chartType;if(e)return d&&o(t,a)?v(d,t,i):void f(e)},!0),i.$watch("chartSeries",s,!0),i.$watch("chartLabels",s,!0),i.$watch("chartOptions",s,!0),i.$watch("chartColors",s,!0),i.$watch("chartType",function(r,a){y(r)||t.equals(r,a)||f(r)}),i.$on("$destroy",function(){m(d,i)})}}}}r.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",r.defaults.global.elements.line.borderWidth=2,r.defaults.global.elements.rectangle.borderWidth=2,r.defaults.global.legend.display=!1,r.defaults.global.colors=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var n="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return n&&(r.defaults.global.animation=!1),t.module("chart.js",[]).provider("ChartJs",a).factory("ChartJsFactory",["ChartJs","$timeout",e]).directive("chartBase",["ChartJsFactory",function(t){return new t}]).directive("chartLine",["ChartJsFactory",function(t){return new t("line")}]).directive("chartBar",["ChartJsFactory",function(t){return new t("bar")}]).directive("chartHorizontalBar",["ChartJsFactory",function(t){return new t("horizontalBar")}]).directive("chartRadar",["ChartJsFactory",function(t){return new t("radar")}]).directive("chartDoughnut",["ChartJsFactory",function(t){return new t("doughnut")}]).directive("chartPie",["ChartJsFactory",function(t){return new t("pie")}]).directive("chartPolarArea",["ChartJsFactory",function(t){return new t("polarArea")}])});